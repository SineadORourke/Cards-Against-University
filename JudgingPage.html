<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    

    <title>Judging</title>
	<link rel="stylesheet" href="cauStyle.css">
	
	<!-- Firebase Library -->
	<script src='https://cdn.firebase.com/js/client/2.4.1/firebase.js'></script>

	
	
	<!--Links for Bootstrap-->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<link rel="stylesheet" href="cauStyle.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  
	</head>
	
	
	
	
<body data-spy="scroll" data-target=".navbar" data-offset="50" id="main">
	
	<!-- Navigation Bar
    ================================================== -->
	<nav class="navbar navbar-inverse" data-spy="affix" data-offset-top="197" id="navigationColour">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>                        
				</button>
				<img src="defaultlogo.png" alt="logo" id="Logo">
				<p class="navbar-brand">Cards Against University : Judging Panel</p>
			</div>
    
			<div>
				<div class="collapse navbar-collapse" id="myNavbar">
					<!-- Navigation options centered 				<--Can center "Judging Panel"
					<ul class="nav navbar-nav">
						<li><a href="#">Judging Panel</a></li>
					</ul>-->
					
					<!-- Navigation option to the right -->
					<ul class="nav navbar-nav navbar-right">
						<li><a href="#">Quit</a></li>
						<li class="dropdown navbar-right" id="profile"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Profile <span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li><a href="#">Current credits</a></li>
								<li><a href="#">Coin counter</a></li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</nav><!-- ./navigation Bar -->    
	
	
	
	
	<!-- Radio Button Form (inside Wells)
    ================================================== -->
	<div id=radioPosition>
		<div class="container" id="radioOptions">
			<h1>Cast your vote:</h1>
			<br>
			<form id="myForm" role="form">
				<div class="well">
					<input type="radio" id="radio1" name="optradio"><label id="r1" for="radio1"></label>
				</div>
				<div class="well">
					<label><input type="radio" name="optradio">Submission 2</label>
				</div>
				<div class="well">
					<label><input type="radio" name="optradio">Submission 3</label>
				</div>
				<div class="well">
					<label><input type="radio" name="optradio">Submission 4</label>
				</div>
			</form>
			<!--Submit button-->
			<a href="resultpage.html"><button class="submitbutton" id="submit2" data-toggle="modal" data-target="#myModal" onclick="onSubmit();">Submit</button></a>
		</div>
	</div><!-- ./radio button form -->
	
	<!-- modal code 
		===============================  -->
		
	<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
       
        <h4 class="modal-title">Your vote has been submitted</h4>
      </div>
      <div class="modal-body">
        <p>Waiting for other players to submit their vote</p>
      </div>
      
    </div>

  </div>
</div>

	
	

 <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <script src="../../assets/js/vendor/holder.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
        <!-- Javascript for voting submission -->
    <script>
	var ref = new Firebase("https://cau-maynooth.firebaseio.com/User1/WhiteCardChosen/Submission");
	var sub;
	var one;

    ref.on("value", function(snapshot) {
        console.log(snapshot.val());
        sub = snapshot.val();
        document.getElementById("r1").textContent = sub;
        one = sub;
    }, function (errorObject) {
            console.log("The read failed: " + errorObject.code);
    });

    // the main firebase reference.
    var myDataRef = new Firebase('hhttps://cau-maynooth.firebaseio.com');
    
    var form = document.getElementById("myForm"); // use the form so we can access the radio buttons.

    var radioText = form.elements["optradio"];  // store the radio buttons into an array.

      // store the text value associated with the radio buttons into a variable.
    var two = radioText[1].nextSibling.data;
    var three = radioText[2].nextSibling.data;
    var four = radioText[3].nextSibling.data;

 	var radioOne = document.getElementById("radio1"); // get the id of each radio button so we can use the checked method.
 	var radioTwo = document.getElementById("radio2");
 	var radioThree = document.getElementById("radio3");
 	var radioFour = document.getElementById("radio4");

    function onSubmit(){ // submits the selected data to the database.
    	var usersRef = myDataRef.child("Judging"); // save the data into a new branch called judging.

    if(radioOne.checked){ // if radio button 1 is selected send it's associated text (i.e. the card you think should win) to the database.       
    	usersRef.child("votes").set({
    		vote : one
    	});
    }
    else if(radioTwo.checked){
    	usersRef.child("votes").set({
    		vote : two
    	});
    }
    else if(radioThree.checked){
    	usersRef.child("votes").set({
    		vote : three
    	});
    }
    else{
    	usersRef.child("votes").set({
    		vote : four
    	});
    }

    }


    </script>
  </body>
</html>
